<?xml version="1.0" encoding="windows-1251"?>
<!-- edited with XML Spy v4.3 U (http://www.xmlspy.com) by LEGO (LEGO) -->
<FORM_DESCRIPTION xmlns="http://www.cognitive.ru/XML/2001/ctform" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.cognitive.ru/XML/2001/ctform  ctform.xsd" name="LDopSogl223">
	<CONTENT_MODEL dfattchfiles="|Document|files" dfnumberdoc="|Document|Число_регномера" key="Key">
		<E name="Key" datatype="integer" index="false" default="&quot;1&quot;" view="invisible" displayname="Ключ" dfprotected="true"/>
		<E name="ИД_последний_редактор" datatype="text" index="true" displayname="ИД последний редактор" dfhidden="true" view="invisible"/>
		<E name="Имя_последний_редактор" datatype="text" index="true" displayname="Имя последний редактор" dfhidden="true" view="invisible"/>
		<S name="Document" displayname="Документ" use="LDopSogl"><E displayname="Регистрационный номер" name="Регистрационный_номер" datatype="text(249)" index="true" dfprotected="true" dfhidden="true"/>
			<E displayname="Префикс рег. номера" name="Префикс_регномера" datatype="dictionary(Prefix,text)" edit="combobox(Prefix)" index="true" view="invisible" dfprotected="false"/>
			<E displayname="Порядковый рег. номер" name="Число_регномера" datatype="integer(+1..)" index="true" view="invisible" dfprotected="true" required="true"/>
			<E displayname="Суффикс рег. номера" name="Суффикс_регномера" datatype="dictionary(Suffix,text)" edit="combobox(Suffix)" dfprotected="false" index="true" view="invisible"/>
			<E displayname="Дата регистрации" name="Дата_регистрации" datatype="date" edit="" index="true" dfprotected="true" required="false" esp="false" default="nowdate()"/>
			<E displayname="Вид документа" name="Вид_документа" datatype="dictionary(VidDocNames,text)" index="true" dfprotected="true" required="false" edit="combobox" value="&quot;Договор&quot;" view="invisible"/>
			<E displayname="Краткое содержание" name="Краткое_содержание" datatype="longtext" euflag="7" index="true" dfprotected="true" required="false" edit="multiline" awindex="true" view="invisible" default="&quot;Договор&quot;" value="&quot;Дополнительное соглашение &quot; +  Номер_договора + &quot; от &quot; +  Дата_заключения_договора + &quot; к  договору № &quot;+  Номер_основного_договора  + &quot; , предмет договора: &quot; +  Предмет_договора   + &quot; поставщик: &quot; + Организация_поставщик|Организация_поставщик_наименование + &quot; , цена договора :  &quot; + Цена_договора_с_НДС "/>
			<E displayname="Имя потока" name="Имя_потока" datatype="text" index="false" view="invisible" dfprotected="true" dfhidden="true" esp="false"/>
			<E displayname="ИД потока" name="ИД_потока" datatype="integer" index="false" dfprotected="true" dfhidden="false" esp="false" view="invisible"/>
			<E displayname="ИД регистратора" name="ИД_регистратора" datatype="integer" index="false" dfprotected="true" dfhidden="false" esp="false" view="invisible"/>
			<E name="header" datatype="text" index="false" value="&quot;Дополнительное соглашение&quot;
"/><E name="subheader" datatype="text" index="false" view="invisible"/><E name="ИД_в_ЕИС" datatype="text" index="true" displayname="ИД в ЕИС" view="invisible"/><E name="Фактическая_дата_размещения" datatype="datetime" index="true" displayname="Фактическая дата размещения" required="false" view="invisible"/><E name="Номер_редакции" datatype="integer" index="true" displayname="Номер редакции" default="1"/><E name="Валюта" datatype="dictionary(Валюта(Наименование),text)@Наименование" index="true" dictpath="" required="false" edit="droplist" default="&quot;Российский рубль&quot;"/><E name="Цифровой_код_валюты" datatype="dictionary(Валюта,text)@Цифровой код" index="true" displayname="Цифровой код валюты" dictpath="" required="false" edit="textbox" default="&quot;643&quot;" view="invisible"/><E name="Код_валюты" datatype="dictionary(Валюта,text)" index="true" displayname="Код валюты" dictpath="" required="false" default="&quot;RUB&quot;" view="invisible"/><E name="Предмет_договора" datatype="longtext" index="true" required="true" displayname="Предмет договора" awindex="true" euflag="7"/><E name="ИД_лота" datatype="integer" index="true" displayname="ИД лота" view="invisible"/><E name="Дата_заключения" datatype="date" index="true" displayname="Дата заключения" required="true"/><E name="Субподрядчики_из_СМП" datatype="boolean" index="true" displayname="Субподрядчики из СМП"/><E name="Название_закупки" datatype="longtext" index="true" displayname="Название закупки" dictpath="" awindex="true" euflag="7" required="false"/><E name="Способ_закупки" datatype="text" index="true" displayname="Способ закупки" required="false"/><E name="Закупка_в_электронной_форме" datatype="boolean" index="true" displayname="Закупка в электронной форме"/><E name="ИД_извещения" datatype="integer" index="true" displayname="ИД извещения"/><E name="Обоснование_внесения_изменений" datatype="longtext" index="true" displayname="Обоснование внесения изменений" awindex="true" euflag="7"/><E name="Не_публиковать_в_ЕИС" datatype="boolean" index="true" displayname="Не публиковать в ЕИС" default="0"/><E name="Номер_лота" datatype="text" index="true" displayname="Номер лота"/><E name="Тип_сведений_договора" datatype="text" index="true" displayname="Тип сведений договора" required="false" value="iif( Номер_редакции &gt;1,&quot;C&quot;,&quot;N&quot; )"/><E name="Номер_договора" datatype="text" index="true" displayname="Номер договора" required="true"/><E name="Дата_начала_исполнения" datatype="date" index="true" displayname="Дата начала исполнения" required="true"/><E name="Дата_окончания_исполнения" datatype="date" index="true" required="true" displayname="Дата окончания исполнения"/><E name="Номер_лота_в_извещении" datatype="integer" index="true" displayname="Номер лота в извещении"/><E name="Дата_подведения_итогов" datatype="datetime" index="true" displayname="Дата подведения итогов"/><E name="Участник_закупки_СМП" datatype="boolean" index="true" displayname="Участник закупки СМП"/><E name="Изменение" datatype="boolean" index="true" default="0" view="invisible"/><E name="ИД_в_ЕИС_изменение" datatype="longtext" index="true" displayname="ИД в ЕИС изменение" view="invisible"/><E name="Номер_основного_договора" datatype="text" index="true" displayname="Номер основного договора" required="true"/><E name="ИД_договора" datatype="integer" index="true" displayname="ИД договора"/><E name="Способ_закупки_код" datatype="dictionary(Способ закупки,text)" index="true" displayname="Способ закупки код" dictpath="" view="invisible"/><E name="Дата_основного_договора" datatype="date" index="true" displayname="Дата основного договора" required="false"/><S name="Организатор_закупки" displayname="Организатор закупки"><E name="Организатор_закупки_наименование" datatype="longtext" index="true" displayname="Организатор_закупки_наименование" required="true" dictpath="" edit="textbox" absettings="&lt;ROOT title=&quot;Организатор закупки&quot; IsMultiple=&quot;False&quot; CanSelectNobody=&quot;True&quot; SelectedUser=&quot;True&quot; SelectedGroup=&quot;True&quot; SelectedDepartments=&quot;True&quot;&gt;&lt;DateDictionary Name=&quot;Departments&quot; DisplayName=&quot;Структура предприятия&quot; /&gt;&lt;/ROOT&gt;" extype="addressbook" abdata="Name"/><E name="Организатор_закупки" datatype="integer" index="true" displayname="Организатор закупки" required="true" dictpath="" view="invisible" extype="addressbook" abdata="Id"/><E name="Организатор_закупки_ИНН" datatype="text" index="true" extype="addressbook" abdata="INN" displayname="Организатор закупки ИНН"/><E name="Организатор_закупки_КПП" datatype="text" index="true" extype="addressbook" abdata="KPP" displayname="Организатор закупки КПП"/><E name="Организатор_закупки_ОРГН" datatype="text" index="true" extype="addressbook" abdata="OGRN" displayname="Организатор закупки ОРГН"/><E name="Организатор_закупки_ЕИС" datatype="text" index="true" displayname="Организатор_закупки_ЕИС"/></S><S name="Организация_заказчик" displayname="Организация заказчик"><E name="Организация_заказчик_наименование" datatype="longtext" index="true" dictpath="" required="true" displayname="Организация_заказчик_наименование" absettings="&lt;ROOT title=&quot;Организация заказчик&quot; IsMultiple=&quot;False&quot; CanSelectNobody=&quot;False&quot; SelectedUser=&quot;False&quot; SelectedGroup=&quot;False&quot; SelectedDepartments=&quot;False&quot;&gt;&lt;DateDictionary Name=&quot;Departments&quot; DisplayName=&quot;Структура предприятия&quot; /&gt;&lt;/ROOT&gt;" edit="textbox" extype="addressbook" abdata="Name"/><E name="Организация_заказчик" datatype="integer" index="true" displayname="Организация заказчик" required="true" dictpath="" view="invisible" extype="addressbook" abdata="Id"/><E name="Организация_заказчик_ИНН" datatype="text" index="true" displayname="Организация заказчик ИНН" extype="addressbook" abdata="INN"/><E name="Организация_заказчик_КПП" datatype="text" index="true" displayname="Организация заказчик КПП" extype="addressbook" abdata="KPP"/><E name="Организация_заказчик_ОГРН" datatype="text" index="true" extype="addressbook" abdata="OGRN" displayname="Организация заказчик ОГРН"/><E name="Организация_заказчик_ЕИС" datatype="text" index="true" extype="addressbook" abdata="EISCode223"/></S><E name="Статус" datatype="dictionary(Статусы договора,text)" index="true"/><E name="Номер_дополнительного_соглашения" datatype="text" index="true" displayname="Номер дополнительного соглашения" required="true"/><E name="Вид_дополнительного_соглашения" datatype="dictionary(Вид дополнительного соглашения,text)" index="true" displayname="Вид дополнительного соглашения"/><E name="Номер_договора_в_ЕИС" datatype="text" index="true" displayname="Номер договора в ЕИС"/><E name="Изменение_объема" datatype="boolean" index="true" displayname="Изменение объема" default="0"/><E name="Изменение_цены" datatype="boolean" index="true" displayname="Изменение цены" default="0"/><E name="Изменение_сроков_исполнения" datatype="boolean" index="true" displayname="Изменение сроков исполнения" default="0"/><E name="Цена_договора" datatype="money" index="true" displayname="Цена_договора" required="true"/><E name="Цена_без_НДС" datatype="money" index="true" displayname="Цена  без НДС" required="true"/><E name="Номер_извещения_в_ЕИС" datatype="text" index="true" displayname="Номер извещения в ЕИС"/><E name="Способ_закупки_положение" datatype="dictionary(Организации заказчики,text)@Способ по положению" index="true" displayname="Способ закупки положение" dictpath="|[|Document|Организация_заказчик|Организация_заказчик]|Способ закупки"/><S name="Организация_поставщик" displayname="Организация поставщик"><E name="Организация_поставщик_наименование" datatype="longtext" index="true" displayname="Организация поставщик наименование" required="true" dictpath="" edit="textbox"/><E name="Организация_поставщик" datatype="dictionary(Контрагенты,text)@Контрагенты" index="true" displayname="Организация поставщик" dictpath="" view="invisible"/><E name="Организация_поставщик_ИНН" datatype="dictionary(Контрагенты,text)@ИНН" index="true" displayname="Организация поставщик ИНН" dictpath=""/><E name="Организация_поставщик_КПП" datatype="dictionary(Контрагенты,text)@КПП" index="true" displayname="Организация поставщик КПП" dictpath=""/><E name="Организация_поставщик_ОКОПФ" datatype="text" index="true" displayname="Организация поставщик ОКОПФ"/><E name="Организация_поставщик_СМП" datatype="boolean" index="true" displayname="Организация поставщик СМП" dictpath="" default="0"/><E name="Организация_поставщик_дата_постановки" datatype="date" index="true" displayname="Организация поставщик дата постановки"/><E name="Тип_юридического_лица_код" datatype="dictionary(Тип Юр. лица,text)" index="true" displayname="Тип юридического лица код" view="invisible"/><E name="Тип_юридического_лица" datatype="dictionary(Тип Юр. лица,text)@Наименование" index="true" displayname="Тип юридического лица" edit="textbox"/><E name="Индивидуальный_предприниматель" datatype="boolean" index="true" displayname="Индивидуальный предприниматель" default="0"/><E name="Организация_поставщик_нерезидент" datatype="boolean" index="true" displayname="Организация поставщик нерезидент"/><E name="Организация_поставщик_индекс" datatype="text" index="true" displayname="Организация поставщик индекс"/><E name="Организация_поставщик_ОКПО" datatype="text" index="true" displayname="Организация поставщик ОКПО"/><E name="Организация_поставщик_ОГРН" datatype="text" index="true"/><E name="Организация_поставщик_регион" datatype="text" index="true" displayname="Организация поставщик регион"/><E name="Организация_поставщик_регион_код" datatype="text" index="true" displayname="Организация поставщик регион код"/><E name="Организация_поставщик_состоит_на_учете" datatype="boolean" index="true" displayname="Организация поставщик состоит на учете"/><E name="Организация_поставщик_район" datatype="text" index="true" displayname="Организация поставщик район"/><E name="Организация_поставщик_населенный_пункт" datatype="text" index="true" displayname="Организация поставщик населенный пункт"/><E name="Организация_поставщик_улица" datatype="text" index="true" displayname="Организация поставщик улица"/><E name="Организация_поставщик_дом" datatype="text" index="true" displayname="Организация поставщик дом"/><E name="Организация_поставщик_корпус" datatype="text" index="true" displayname="Организация поставщик корпус"/><E name="Организация_поставщик_офис" datatype="text" index="true" displayname="Организация поставщик офис"/><E name="Организация_поставщик_email" datatype="text" index="true" displayname="Организация поставщик email"/><E name="Организация_поставщик_телефон" datatype="text" index="true" displayname="Организация поставщик телефон"/><E name="Организация_поставщик_идентификационный_номер" datatype="text" index="true" displayname="Организация поставщик идентификационный номер"/><E name="Организация_поставщик_доп_идентификационный_номер" datatype="text" index="true" displayname="Организация поставщик доп идентификационный номер"/><E name="Организация_поставщик_страна" datatype="text" index="true" displayname="Организация поставщик страна"/><E name="Организация_поставщик_страна_код" datatype="text" index="true" displayname="Организация поставщик страна код"/><E name="Организация_поставщик_город" datatype="text" index="true" displayname="Организация поставщик город"/></S><E name="Сведения_о_сроке_окончания" datatype="text" index="true" displayname="Сведения о сроке окончания"/><E name="Дата_документа_основания" datatype="date" index="true" displayname="Дата документа основания"/><E name="Номер_в_ЕИС" datatype="text" index="true" displayname="Номер в ЕИС"/><E name="Номер_закупки" datatype="text" index="true" displayname="Номер закупки"/><E name="Инновационная_продукция" datatype="boolean" index="true" displayname="Инновационная продукция" default="0"/><E name="Наименование_ЭТП" datatype="dictionary(Электронные площадки,text)" index="true" displayname="Наименование ЭТП" required="" dictpath="" requiredex=" Закупка_в_электронной_форме "/><E name="ИД_ЭТП" datatype="text" index="true" displayname="ИД ЭТП" view="invisible"/><E name="ИД_на_ЭТП" datatype="text" index="true" displayname="ИД на ЭТП"/><E name="Адрес_ЭТП" datatype="dictionary(Электронные площадки,url)@Адрес" index="true" displayname="Адрес ЭТП" required="" dictpath=""/><E name="Год_закупки" datatype="integer" index="true" displayname="Год закупки" view="invisible"/><E name="Договор_в_бумажном_виде" datatype="boolean" index="true" displayname="Договор в бумажном виде"/><E name="Расширенный_план" datatype="boolean" index="true" displayname="Расширенный план" default="0"/><S name="Заказчик_подразделение"><E name="Заказчик_подразделение" datatype="integer" index="true" extype="addressbook" abdata="Id"/><E name="Заказчик_подразделение_наименование" datatype="text" index="true" edit="tool(CallTools.AddressBookTool)" absettings="&lt;ROOT title=&quot;Адресная книга&quot; IsMultiple=&quot;False&quot; CanSelectNobody=&quot;False&quot; SelectedUser=&quot;False&quot; SelectedGroup=&quot;False&quot; SelectedDepartments=&quot;True&quot;&gt;&lt;DateDictionary Name=&quot;Departments&quot; DisplayName=&quot;Структура предприятия&quot; /&gt;&lt;/ROOT&gt;"/></S><E name="Основание_расторжения_код" datatype="dictionary(Основания расторжения договора,text)@Основания расторжения договор)" index="true" requiredex=" ..|Статус =&quot;Расторжение договора&quot;" dictpath="" displayname="Основание расторжения код"/><E name="Основание_расторжения" datatype="longtext" index="true" requiredex=" ..|Статус =&quot;Расторжение договора&quot;" displayname="Основание расторжения" dictpath=""/><E name="Документ_основание_расторжения_код" datatype="dictionary(Документ основание расторжения,text)" index="true" dictpath="" displayname="Документ_основание_расторжения_код"/><E name="Документ_основание_расторжения" datatype="longtext" index="true" displayname="Документ основание расторжения" dictpath=""/><E name="Дата_расторжения_договора" datatype="datetime" index="true" displayname="Дата расторжения договора"/><E name="Документ_основание_расторжения_номер" datatype="longtext" index="true" displayname="Документ_основание_расторжения_номер"/><E name="Документ_основание_расторжения_дата" datatype="date" index="true" displayname="Документ_основание_расторжения_дата"/><E name="Номер_сведений_о_расторжении" datatype="text" index="true" displayname="Номер сведений о расторжении"/><E name="Прекращение_обязательств_сторон_окончание_действия" datatype="boolean" index="true" displayname="Прекращение обязательств сторон окончание действия"/><E name="Исполнение_завершено" datatype="boolean" index="true" displayname="Исполнение завершено"/><E name="Причина_отмены_сведений" datatype="longtext" index="true" displayname="Причина отмены сведений"/><E name="Начисление_неустоек" datatype="boolean" index="true" displayname="Начисление неустоек" default="0"/><E name="Информация_о_неустойках" datatype="longtext" index="true" displayname="Информация о неустойках" relevant=" Начисление_неустоек " euflag="7" awindex="true"/><S name="Ответственный_исполнитель" displayname="Ответственный исполнитель"><E name="Ответственный_исполнитель" datatype="integer" index="true" displayname="Ответственный исполнитель" extype="addressbook" abdata="Id" view="invisible"/><E name="Ответственный_исполнитель_ФИО" datatype="text" index="true" displayname="Ответственный исполнитель ФИО" dictpath="" edit="textbox,tool(CallTools.AddressBookTool)" absettings="&lt;ROOT title=&quot;Ответственный исполнитель ФИО&quot; IsMultiple=&quot;False&quot; CanSelectNobody=&quot;False&quot; SelectedUser=&quot;True&quot; SelectedGroup=&quot;False&quot; SelectedDepartments=&quot;False&quot;&gt;&lt;DateDictionary Name=&quot;Persons&quot; DisplayName=&quot;Пользователи&quot; /&gt;&lt;DateDictionary Name=&quot;Departments&quot; DisplayName=&quot;Структура предприятия&quot; /&gt;&lt;/ROOT&gt;" required="false" abdata="Name"/></S><S name="Исполнитель"><E name="Исполнитель" datatype="integer" index="true" extype="addressbook" abdata="Id"/><E name="Исполнитель_ФИО" datatype="text" index="true" displayname="Исполнитель ФИО" edit="tool(CallTools.AddressBookTool)" absettings="&lt;ROOT title=&quot;Адресная книга&quot; IsMultiple=&quot;False&quot; CanSelectNobody=&quot;False&quot; SelectedUser=&quot;True&quot; SelectedGroup=&quot;False&quot; SelectedDepartments=&quot;False&quot;&gt;&lt;DateDictionary Name=&quot;Persons&quot; DisplayName=&quot;Пользователи&quot; /&gt;&lt;DateDictionary Name=&quot;Departments&quot; DisplayName=&quot;Структура предприятия&quot; /&gt;&lt;/ROOT&gt;" abdata="Name"/></S><E name="ИД_договора_на_ЭТП" datatype="text" index="true" displayname="ИД_договора_на_ЭТП"/><E name="Дополнительная_дата_документа_основания" datatype="datetime" index="true" displayname="Дополнительная дата документа основания"/><E name="url" datatype="longtext" index="true" displayname="url"/><S name="ГРБС" displayname="ГРБС"><E name="ГРБС_наименование" datatype="longtext" index="true" dictpath="" required="false" displayname="ГРБС_наименование" extype="addressbook" abdata="Name"/><E name="ГРБС" datatype="integer" index="true" displayname="ГРБС" required="false" dictpath="" extype="addressbook" abdata="Id"/></S><S name="Управление" displayname="Управление"><E name="Управление" datatype="integer" index="true" displayname="Управление" extype="addressbook" abdata="Id"/><E name="Управление_наименование" datatype="text" index="true" displayname="Управление наименование" abdata="Name"/></S><S name="Руководитель_управления" displayname="Руководитель управления"><E name="Руководитель_управления" datatype="integer" index="true" displayname="Руководитель управления" extype="addressbook" abdata="Id"/><E name="Руководитель_управления_ФИО" datatype="text" index="true" displayname="Руководитель управления ФИО" abdata="Name"/></S><S name="Инициатор"><E name="Инициатор" datatype="integer" index="true" abdata="Id" extype="addressbook" displayname="Инициатор"/><E name="Инициатор_ФИО" datatype="text" index="true" edit="tool(CallTools.AddressBookTool)" extype="addressbook" absettings="&lt;ROOT title=&quot;Адресная книга&quot; IsMultiple=&quot;False&quot; CanSelectNobody=&quot;False&quot; SelectedUser=&quot;True&quot; SelectedGroup=&quot;False&quot; SelectedDepartments=&quot;False&quot;&gt;&lt;DateDictionary Name=&quot;Persons&quot; DisplayName=&quot;Пользователи&quot; /&gt;&lt;DateDictionary Name=&quot;Departments&quot; DisplayName=&quot;Структура предприятия&quot; /&gt;&lt;/ROOT&gt;" abdata="Name"/></S><S name="Руководитель_инициатора" displayname="Руководитель инициатора"><E name="Руководитель_инициатора" datatype="integer" index="true" displayname="Руководитель инициатора" extype="addressbook" abdata="Id"/><E name="Руководитель_инициатора_ФИО" datatype="text" index="true" displayname="Руководитель инициатора ФИО" abdata="Name"/></S><S name="Подразделение_инициатор" displayname="Подразделение инициатор"><E name="Подразделение_инициатор_наименование" datatype="text" index="true" displayname="Подразделение инициатор наименование" required="true" dictpath="" edit="tool(CallTools.AddressBookTool)" absettings="&lt;ROOT title=&quot;Организатор закупки&quot; IsMultiple=&quot;False&quot; CanSelectNobody=&quot;False&quot; SelectedUser=&quot;False&quot; SelectedGroup=&quot;False&quot; SelectedDepartments=&quot;True&quot;&gt;&lt;DateDictionary Name=&quot;Departments&quot; DisplayName=&quot;Структура предприятия&quot; /&gt;&lt;/ROOT&gt;" abdata="Name"/><E name="Подразделение_инициатор" datatype="integer" index="true" displayname="Подразделение инициатор" required="false" dictpath="" edit="textbox" abdata="Id" extype="addressbook" view="invisible"/></S><S name="Ответственный_за_договор" displayname="Ответственный за договор"><E name="Ответственный_за_договор" datatype="integer" index="true" displayname="Ответственный за договор" extype="addressbook" abdata="Id"/><E name="Ответственный_за_договор_ФИО" datatype="text" index="true" displayname="Ответственный за договор ФИО" abdata="Name" extype="addressbook"/></S><E name="Аренда_недвижимости" datatype="boolean" index="true" displayname="Аренда недвижимости"/><E name="Закупка_коммунальных_услуг" datatype="boolean" index="true" displayname="Закупка коммунальных услуг"/></S>
		<S name="Files" use="FilesDopSogl" displayname="Документация">
			<E name="header" datatype="text" index="false" value="&quot;Документы договора&quot;"/><E name="subheader" datatype="text" index="false"/></S>
		<S name="FilesIntegration" use="FilesIntegration" displayname="Файлы интеграции">
			<E name="header" datatype="text" index="false" value="&quot;Файлы интеграции&quot;"/><E name="subheader" datatype="text" index="false"/></S>
	</CONTENT_MODEL>
	<SCRIPT language="VBScript">Dim oTrace

Dim saveCheck
saveCheck=0

Sub generate_num

'oTrace.Trace " VBCRPT generate_num..."

  Dim rn
  pref = Data("|Document|Префикс_регномера").Value
  num = Data("|Document|Число_регномера").Value
  suf = Data("|Document|Суффикс_регномера").Value

 if Len(num) = 0 then
'	oTrace.Trace " VBCRPT End generate_num(Нет номера)"
	Exit Sub
 end if

  if Len(pref)&gt;0 then
	rn = CStr(rn) + pref + "-"
  end if
  rn = CStr(rn) + CStr(num)
  if Len(suf)&gt;0 then
     rn = CStr(rn) + "-" + CStr(suf)
  end if

    Data("|Document|Регистрационный_номер")=CStr(rn)
    Exit Sub

'  oTrace.Trace " VBCRPT End generate_num"
  err_exit:
  Form.MsgBox err.Description
End Sub
    

Sub clear_all_readonly
'   oTrace.Trace " VBCRPT clear_all_readonly..."
    Data("|Document|Число_регномера").Attribute("readonly")=""
'      oTrace.Trace " VBCRPT end clear_all_readonly"
End Sub

 Sub prepare_completed
'   oTrace.Trace " VBCRPT prepare_completed..."
    clear_all_readonly
    Data("|Document|Число_регномера").Attribute("readonly")="true"
'   oTrace.Trace " VBCRPT End prepare_completed"
    End Sub

    Sub prepare_wfclosed
'    oTrace.Trace " VBCRPT prepare_wfclosed..."
'    oTrace.Trace " VBCRPT End prepare_wfclosed"
    End Sub

    Sub prepare_finder
'    oTrace.Trace " VBCRPT prepare_finder..."
    clear_all_readonly
'    oTrace.Trace " VBCRPT End prepare_finder"
    End Sub

    Sub prepare_registration
'    oTrace.Trace " VBCRPT prepare_registration..."
    clear_all_readonly
    Data("|Document|Число_регномера").Attribute("readonly")="true"
'    oTrace.Trace " VBCRPT End prepare_registration"
    End Sub

    Sub Form_NamedEvent( evt )
'    oTrace.Trace " VBCRPT Form_NamedEvent..."
    if evt = "dfmakestrregnum" then
    generate_num
    End If
    if evt = "dfrgmregistration" then
    prepare_registration
    End If
    if evt = "dfrgmfinder" then
    prepare_finder
    End If
    if evt = "dfrgmcompleted" then
    prepare_completed
    End If
    if evt = "dfrgmwfclosed" then
    prepare_wfclosed
    End if


    if evt="dfpreparestrregnum" then 'началось сохранение документа
       saveCheck=1
    end if

    if evt="dfmakestrregnum" then 'закончилось сохранение документа
       saveCheck=0
    end if

'   oTrace.Trace " VBCRPT End Form_NamedEvent"
    End Sub

    if evt="recalculateall" then 'началось сохранение документа
           Data("|Document|Субподрядчики_из_СМП").Attribute("readonly")="true"
         Data("|Document|Закупка_в_электронной_форме").Attribute("readonly")="true"
         Data("|Document|Участник_закупки_СМП").Attribute("readonly")="true"
    end if

Set ctx = CreateObject("Form.ExecutionContext")

    Sub Form_Load
'    Set oTrace = CreateObject("TRACE.VBTracer")
'    oTrace.Trace " VBCRPT End Form_Load" 

    Data("|Document|Субподрядчики_из_СМП").Attribute("readonly")="true"
    Data("|Document|Закупка_в_электронной_форме").Attribute("readonly")="true"
    Data("|Document|Участник_закупки_СМП").Attribute("readonly")="true"

    End Sub 

    Sub Form_Unload
'    oTrace.Trace " VBCRPT Form_Unload..."
'    Set oTrace = Nothing
    End Sub

    sub form_FieldDataChanged(field)
    s = field.Attribute("frm.abstoredata")
    if s &lt;&gt; "" and field.Value = "" then
    Set arr = field.Parent(s)
    if not arr is nothing then
    arr.RemoveAll
    end if
    end if

   ' Документ не сохраняется
   if saveCheck=0 then

          ' Очистили поле Валюта
          if field.name = "Валюта" and Len(field.value)=0 then
                  Data("|Document|Цифровой_код_валюты")= ""
                  Data("|Document|Код_валюты")= ""
          end if

          ' Очистили поле Организация_заказчик
          if field.name = "Организация_заказчик_наименование" and Len(field.value)=0 then
                  Data("|Document|Организация_заказчик|Организация_заказчик")= ""
          end if

          ' Очистили поле Организатор_закупки
          if field.name = "Организатор_закупки_наименование" and Len(field.value)=0 then
                  Data("|Document|Организатор_закупки|Организатор_закупки")= ""
          end if

          ' Очистили поле Организация_поставщик
          if field.name = "Организация_поставщик" and Len(field.value)=0 then
                  Data("|Document|Организация_поставщик|Организация_поставщик_код")= ""
                 
          end if

          if field.name = "Основание_расторжения" and Len(field.value)=0 then
                  Data("|Document|Расторжение_договора|Основание_расторжения_код")= ""
          end if

    end if

end sub</SCRIPT>
	<plugins>
		<restriction displayname="Генерация номера" progid="Euphfrm.RegNumGenerator" root="" initstring="">
			<arg role="numberdoc" path="|S|Число_регномера"/>
			<arg role="flow" path="|S|ИД_потока"/>
			<arg role="regnum" path="|S|Регистрационный_номер"/>
			<checkentry type="onevent" param="dfgenerateregnum" action="error"/>
		</restriction>
		<dictionary name="Тип связки" progid="FrmTools.DictSource" inittime="once" initstring="stored:Тип связки"/><dictionary name="Организации" progid="FrmTools.DictSource" inittime="field" initstring="stored:Организации" view=""/><dictionary name="Статусы договора" progid="FrmTools.DictSource" inittime="once" initstring="stored:Статусы договора"/><dictionary name="Основания расторжения договора" progid="FrmTools.DictSource" inittime="field" initstring="stored:Основания расторжения договора"/><dictionary name="Валюта" progid="FrmTools.DictSource" inittime="field" initstring="stored:Валюта" view=""/><dictionary name="Контрагенты" progid="FrmTools.DictSource" inittime="field" initstring="stored:Контрагенты"/><dictionary name="ОКЕИ" progid="FrmTools.DictSource" inittime="field" initstring="stored:ОКЕИ"/><dictionary name="Организации заказчики" progid="FrmTools.DictSource" inittime="field" initstring="stored:Организации заказчики"/><dictionary name="Вид дополнительного соглашения" progid="FrmTools.DictSource" inittime="once" initstring="stored:Вид дополнительного соглашения"/><dictionary name="Тип Юр. лица" progid="FrmTools.DictSource" inittime="field" initstring="stored:Тип Юр. лица"/><dictionary name="Документ основание расторжения" progid="FrmTools.DictSource" inittime="field" initstring="stored:Документ основание расторжения"/></plugins>
</FORM_DESCRIPTION>
