(function(){})(window.ct=window.ct||{}),function(n){function t(n){this._baseUrl=n[n.length-1]==="/"?n:n+"/"}n.AutoTaskApiService=t;t.prototype=Object.create(ct.api.ApiService.prototype);t.prototype.constructor=t;t.prototype.getAutoTaskSources=function(n){var t=this._baseUrl+"GetAutoTaskSources",i={taskType:n};return this.get(t,i).then(function(n){return n.response.data})};t.prototype.getAutoTasks=function(n,t){var i=this._baseUrl+"GetAutoTasks",r={type:n,sourceName:t};return this.get(i,r).then(function(n){return n.response.data})};t.prototype.runAutoTask=function(n){var t=this._baseUrl+"RunAutoTask";return this.post(t,n).then(function(n){return n.response})};t.create=function(n){return new t(n)}}((window.ct=window.ct||{},window.ct.api=window.ct.api||{})),function(){}(window.ct=window.ct||{}),function(n,t){function u(n,u){function h(n){var t={load:function(){return i.getAutoTasks(u,n.selectedItem.name)}};f.option({disabled:!1,dataSource:t});f.reset()}function c(){var n=!f.option("value");v.option("disabled",n)}function l(){i.runAutoTask(f.option("value")).then(function(n){console.log(n);ct.ui.alert("Уведомление",n.statusMessage)})}var a=t("<div>").dxSelectBox({dataSource:{load:function(){return i.getAutoTaskSources(u)}},displayExpr:"name",placeholder:"Выберите плагин...",noDataText:"Нет плагинов для отображения",onSelectionChanged:h}),o=t("<div>").dxSelectBox({disabled:!0,displayExpr:"name",placeholder:"Выберите задание...",noDataText:"Нет заданий для отображения",onSelectionChanged:c}),s=t("<div>").dxButton({text:"Запустить задание",disabled:!0,onClick:l}),f=o.dxSelectBox("instance"),v=s.dxButton("instance"),y=r(a,"Плагин:"),p=r(o,"Задание:"),w=r(s);n.addClass("dx-fieldset").append(t("<div>").addClass("dx-fieldset-header").html(e(u)),y,p,w)}function r(n,i){var r=i?t("<div>").addClass("dx-field-label ct-field-label-20").html(i):null,u=t("<div>").addClass("dx-field-value ct-field-value-80").append(n);return t("<div>").addClass("dx-field").append(r,u)}function e(n){return n==="import"?"Задания автоимпорта":n==="export"?"Задания автоэкспорта":""}var f=t("#auto-tasks").attr("data-base-url"),i=ct.api.AutoTaskApiService.create(f);u(t("#auto-tasks-export"),"export");u(t("#auto-tasks-import"),"import")}((window.ct=window.ct||{},window.ct.autoTasks=window.ct.autoTasks||{}),$);