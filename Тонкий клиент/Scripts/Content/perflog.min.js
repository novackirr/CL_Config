function perflog(n){var t=Date.now()-window.performance.timing.navigationStart;pageLoadMonitoringAfterSeconds>t/1e3||$.ajax({url:getAbsoluteUrl("PerfLog/Log"),type:"POST",data:{elapsedMilliseconds:t,message:n,url:window.location.href,usr:$(".header-menu-user-name").attr("data-user-sid"),browserInfo:navigator.sayswho,pageLoad:pageLoadTime}})}function perflogAction(n,t,i){i||(i=window.location.href);$.ajax({url:getAbsoluteUrl("PerfLog/Log"),type:"POST",data:{elapsedMilliseconds:Date.now()-t,message:n,url:i,usr:$(".header-menu-user-name").attr("data-user-sid"),browserInfo:navigator.sayswho}})}function pageLoadMonitoring(n){var t=window.location.pathname.toLowerCase();if(t.indexOf("/folderstructure")!==-1){if(n.indexOf("getfolderitemscount")!==-1)pageLoadCounter++;else return;pageAjaxCompleteCounters||(pageAjaxCompleteCounters=$("#search-horizontal-menu li>a[href*='FolderStructure'],.search-menu-tabs li>a[href*='FolderStructure']").length-1);pageLoadCounter==pageAjaxCompleteCounters&&perflog(window.location.pathname)}else if(t.indexOf("/performer")!==-1||t.indexOf("/control")!==-1||t.indexOf("/complete")!==-1)if(n.indexOf("lookforscount")!==-1)perflog(window.location.pathname);else return;else if(t.indexOf("/search/search")!==-1){if(n.indexOf("/search/searchcount")!==-1)pageLoadCounter++;else return;pageAjaxCompleteCounters||(pageAjaxCompleteCounters=$("#search-horizontal-menu li>a[href*='/Search/Search']").length);pageLoadCounter==pageAjaxCompleteCounters&&perflog(window.location.pathname)}else if(t.indexOf("/documentview")!==-1)if(n.indexOf("routesjson")!==-1&&firstPageLoad)perflog(window.location.pathname),firstPageLoad=!1;else return}function clientActionsMonitoring(n,t,i,r){(t.indexOf("/deleteattachmenthandler")!==-1||t.indexOf("/createattachmenthandler")!==-1||t.indexOf("/edit")!==-1&&t.indexOf("/editlock")===-1||t.indexOf("/registerhandler")!==-1)&&perflogAction(n,i,r)}navigator.sayswho=function(){var i=navigator.userAgent,t,n=i.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(t=/\brv[ :]+(\d+)/g.exec(i)||[],"IE "+(t[1]||"")):n[1]==="Chrome"&&(t=i.match(/\b(OPR|Edge)\/(\d+)/),t!=null)?t.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],(t=i.match(/version\/(\d+)/i))!=null&&n.splice(1,1,t[1]),n.join(" "))}();var pageLoadTime,pageLoadCounter=0,pageAjaxCompleteCounters,firstPageLoad=!0;window.onload=function(){pageLoadTime=window.performance.timing.domContentLoadedEventEnd-window.performance.timing.navigationStart};$(document).ajaxSend(function(n,t,i){var r=Date.now(),u=window.location.href;t.always(function(){var n=i.url,t=n.toLowerCase();pageLoadMonitoringEnabled&&pageLoadMonitoring(t);clientActionsMonitoringEnabled&&clientActionsMonitoring(n,t,r,u)})});