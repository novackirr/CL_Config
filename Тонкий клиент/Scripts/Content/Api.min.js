(function(){})(window.ct=window.ct||{}),function(n){function t(){$.ajax}n.ApiService=t;t.prototype.ajax=function(n){return $.ajax(n).then(this._successResponseHandler,this._errorResponseHandler)};t.prototype.get=function(n,t){return $.get(n,t).then(this._successResponseHandler,this._errorResponseHandler)};t.prototype.post=function(n,t){return $.ajax({type:"POST",url:n,contentType:"application/json",data:JSON.stringify(t),dataType:"json"}).then(this._successResponseHandler,this._errorResponseHandler)};t.prototype._successResponseHandler=function(n){var i={response:n},t;return typeof n=="string"?n.includes("<html")?t=$(n).find(".application-errors").html():(n=JSON.parse(n),t=n.error||n.status&&n.status.toLowerCase()==="error"?n.responseMessage:null):(t=n.status==="error"?n.statusMessage:undefined,n.status==="warning"&&n.statusMessage&&ct.ui.notify(n.statusMessage,"warning",5e3)),t&&(i.alert=ct.ui.alert("Произошла ошибка",t)),i};t.prototype._errorResponseHandler=function(n){var t=typeof n.responseText=="string"?n.responseText:"Произошла непредвиденная ошибка.";return{response:n,alert:ct.ui.alert("Ошибка",t)}}}((window.ct=window.ct||{},window.ct.api=window.ct.api||{}));